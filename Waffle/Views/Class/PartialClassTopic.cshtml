@model Waffle.ViewModels.TopicVM

@using (Ajax.BeginForm("NewTopic", "Class", new AjaxOptions
    {
    HttpMethod = "Post",
    InsertionMode = InsertionMode.Replace,
    OnSuccess = "ajaxSuccess('#status', 'Topic')",
    UpdateTargetId = "ajaxContent",
    LoadingElementId = "ajaxloader",
    OnFailure = "ajaxFailed('#status', 'topic')",
    AllowCache =false

    }))

    {


    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    @Html.HiddenFor(m => m.ClassId)

    <p class="text-primary pt-3">Topics are used to group contents</p>


    <div class="form-row">

        <div class="col-12 col-md-7 pb-3">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroupPrepend1">Title </span>
                </div>
                @Html.EditorFor(model => model.Topic, new
               {
               htmlAttributes = new
                   {
                   @class = "form-control",
                   id = "topicTitle",
                   placeholder = "Input topic title",
                   aria_describedby = "inputGroupPrepend1"

                   }
               })
               
            </div>
            @Html.ValidationMessageFor(model => model.Topic, "", new { @class = "text-danger" })
        </div>


        <div class="col-12 col-md-3 pb-2">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroupPrepend2">Position</span>
                </div>
                @Html.EditorFor(model => model.Order, new
               {
               htmlAttributes = new
                   {
                   @class = "form-control",
                   id = "topicOrder",
                   placeholder = "Position of topic",
                   aria_describedby = "inputGroupPrepend2"

                   }
               })

            </div>

            <span class="small text-secondary">(e.g. 1,2,3 etc)</span>
            @Html.ValidationMessageFor(model => model.Order, "", new { @class = "text-danger" })
        </div>

        <div class="form-group col-12 col-md-2 pr-3 pl-3">
            <input type="submit" value="Add Topic" class="btn btn-outline-success form-control" />
        </div>

    </div>

    <h4 id="status" class="text-center"></h4>



    <!-- Flexbox container for aligning the toasts -->
    @*<div id="statustoast" aria-live="polite" aria-atomic="true" class="d-flex justify-content-center align-items-center" style="min-height: 200px;">

        <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <img src="..." class="rounded mr-2" alt="...">
                <strong class="mr-auto">Bootstrap</strong>
                <small>11 mins ago</small>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                <span class="fa fa-check-circle"></span>
                <span class="text-success">Topic Successfully added to list</span>
            </div>
        </div>
    </div>*@

    <div id="ajaxloader" class=" text-center" style="display:none;">
        <div class="spinner-border text-success" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    }


<div id="ajaxContent">
    @{ Html.RenderPartial("PartialAllClassTopics", Model);}
</div>



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
